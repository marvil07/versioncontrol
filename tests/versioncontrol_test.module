<?php
// $Id$
/**
 * @file
 * TestVCS backend for Version Control API -
 * Helper for testing Version Control core
 */

require_once drupal_get_path('module', 'versioncontrol') . '/includes/VersioncontrolBackend.php';
require_once drupal_get_path('module', 'versioncontrol') . '/includes/VersioncontrolRepository.php';
require_once drupal_get_path('module', 'versioncontrol') . '/includes/VersioncontrolAccount.php';

/**
 * Implementation of hook_versioncontrol_backends().
 */
function versioncontrol_test_versioncontrol_backends() {
  return array(
    'test' => new VersioncontrolTestBackend()
  );
}

class VersioncontrolTestBackend extends VersioncontrolBackend {
  public function __construct() {
    $this->name = 'TestVCS';
    $this->description = t('TestVCS backend for Version Control API.');
    $this->capabilities = array(
      // Use the commit hash for to identify the commit instead of an individual
      // revision for each file.
      VERSIONCONTROL_CAPABILITY_ATOMIC_COMMITS
    );
    $this->classes = array(
      'repo' => 'VersioncontrolTestRepository',
      'account' => 'VersioncontrolTestAccount',
    );
  }
}

class VersioncontrolTestRepository extends VersioncontrolRepository {
}

class VersioncontrolTestAccount extends VersioncontrolAccount {
}
